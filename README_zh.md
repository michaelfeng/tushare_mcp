# Tushare MCP æœåŠ¡å™¨

[English](./README.md) | [ä¸­æ–‡](./README_zh.md)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº [Tushare](https://tushare.pro/) æ•°æ®æ¥å£çš„æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) æœåŠ¡å™¨ï¼Œä¸º AI åŠ©æ‰‹æä¾›ä¸°å¯Œã€å…¨é¢çš„ä¸­å›½å†…åœ°é‡‘èå¸‚åœºæ•°æ®ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- **è‚¡ç¥¨æ•°æ®**: æä¾›è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ã€æ—¥çº¿/å‘¨çº¿/æœˆçº¿è¡Œæƒ…åŠå†å²æ•°æ®ã€‚
- **å¸‚åœºæ•°æ®**: åŒ…å«é¾™è™æ¦œã€èèµ„èåˆ¸ã€å¤§å®—äº¤æ˜“ã€èµ„é‡‘æµå‘ç­‰æ•°æ®ã€‚
- **è´¢åŠ¡æ•°æ®**: è·å–ä¸Šå¸‚å…¬å¸çš„è´¢åŠ¡æŠ¥è¡¨å’Œå…³é”®è´¢åŠ¡æŒ‡æ ‡ã€‚
- **æŒ‡æ•°æ•°æ®**: è·å–ä¸»è¦å¸‚åœºæŒ‡æ•°çš„è¡Œæƒ…å’Œå†å²æ•°æ®ã€‚
- **åŸºé‡‘ä¸ETF**: æä¾› ETF è¡Œæƒ…ã€åŸºé‡‘å‡€å€¼ã€æŒä»“ã€è¯„çº§ç­‰ä¿¡æ¯ã€‚
- **å€ºåˆ¸æ•°æ®**: æä¾›å€ºåˆ¸å’Œå¯è½¬å€ºçš„åŸºæœ¬ä¿¡æ¯åŠè¡Œæƒ…æ•°æ®ã€‚
- **å®è§‚ç»æµ**: æä¾› GDPã€CPIã€åˆ©ç‡ã€æ±‡ç‡ã€PMIã€è´§å¸ä¾›åº”é‡ç­‰æ•°æ®ã€‚
- **æ™ºèƒ½æœç´¢**: æ”¯æŒæŒ‰åç§°æˆ–ä»£ç æœç´¢è‚¡ç¥¨ã€‚
- **é«˜æ€§èƒ½**: é‡‡ç”¨å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒé«˜æ•ˆæŸ¥è¯¢ã€‚

## ğŸ“¦ å®‰è£…æŒ‡å—

1.  å…‹éš†ä»£ç ä»“åº“ï¼š
    ```bash
    git clone https://github.com/your-username/tushare_mcp.git
    cd tushare_mcp
    ```

2.  å®‰è£…æ‰€éœ€ä¾èµ–ï¼š
    ```bash
    pip install -r requirements.txt
    ```

## âš™ï¸ é…ç½®è¯´æ˜

ä¸ºäº†ä½¿ç”¨æ­¤æœåŠ¡å™¨ï¼Œæ‚¨éœ€è¦ä¸€ä¸ª Tushare API ä»¤ç‰Œã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ [Tushare Pro å®˜ç½‘](https://tushare.pro/) æ³¨å†Œæ¥è·å–å…è´¹ä»¤ç‰Œã€‚

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼é…ç½®æ‚¨çš„ä»¤ç‰Œï¼š

#### æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡ (æ¨è)

è¿™æ˜¯æœ€å®‰å…¨ã€æœ€çµæ´»çš„æ–¹æ³•ã€‚æœåŠ¡å™¨ä¼šä¼˜å…ˆä»åä¸º `TUSHARE_TOKEN` çš„ç¯å¢ƒå˜é‡ä¸­è‡ªåŠ¨è¯»å–ä»¤ç‰Œã€‚

-   **åœ¨ macOS/Linux ç³»ç»Ÿä¸­:**
    ```bash
    export TUSHARE_TOKEN="your_tushare_token_here"
    ```
    ä¸ºäº†ä½¿æ­¤è®¾ç½®æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ‚¨å¯ä»¥å°†è¿™è¡Œå‘½ä»¤æ·»åŠ åˆ°æ‚¨ shell çš„é…ç½®æ–‡ä»¶ä¸­ (ä¾‹å¦‚ `~/.bash_profile` æˆ– `~/.zshrc`)ã€‚

-   **åœ¨ Windows ç³»ç»Ÿä¸­:**
    ```bash
    set TUSHARE_TOKEN="your_tushare_token_here"
    ```
    è¦æ°¸ä¹…è®¾ç½®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œç³»ç»Ÿå±æ€§â€é¢æ¿ä¸­çš„â€œç¯å¢ƒå˜é‡â€åŠŸèƒ½ã€‚

#### æ–¹æ³•äºŒï¼šé…ç½®æ–‡ä»¶ (ç”¨äº MCP å®¢æˆ·ç«¯)

å¦‚æœæ‚¨ä½¿ç”¨çš„ MCP å®¢æˆ·ç«¯èƒ½ä¸ºæ‚¨å¯åŠ¨æœåŠ¡å™¨ (ä¾‹å¦‚ Claude Desktop)ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ `mcp_config.json` æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚

1.  **åˆ›å»ºé…ç½®æ–‡ä»¶**ï¼šé€šè¿‡å¤åˆ¶æ¨¡æ¿æ–‡ä»¶æ¥åˆ›å»ºæ‚¨çš„é…ç½®æ–‡ä»¶ï¼š
    ```bash
    cp mcp_config.json.template mcp_config.json
    ```

2.  **ç¼–è¾‘ `mcp_config.json`**ï¼š
    æ‰“å¼€è¯¥æ–‡ä»¶å¹¶æ›¿æ¢å…¶ä¸­çš„å ä½ç¬¦ã€‚
    -   `cwd`: å°†æ­¤è®¾ç½®ä¸º `tushare_mcp` é¡¹ç›®ç›®å½•çš„**ç»å¯¹è·¯å¾„**ã€‚
    -   `TUSHARE_TOKEN`: åœ¨æ­¤å¤„ç²˜è´´æ‚¨çš„ Tushare ä»¤ç‰Œã€‚

    **`mcp_config.json` ç¤ºä¾‹:**
    ```json
    {
      "mcpServers": {
        "tushare": {
          "command": "python",
          "args": ["server.py"],
          "cwd": "/path/to/your/tushare_mcp",
          "env": {
            "TUSHARE_TOKEN": "YOUR_TUSHARE_TOKEN_HERE"
          }
        }
      }
    }
    ```

> **æ³¨æ„**: å¦‚æœæœªé€šè¿‡ä»»ä½•ä¸€ç§æ–¹å¼è®¾ç½® `TUSHARE_TOKEN`ï¼ŒæœåŠ¡å™¨å°†å›é€€ä½¿ç”¨ Tushare çš„å…è´¹æ¥å£ï¼Œè¯¥æ¥å£åœ¨æ•°æ®è®¿é—®æ–¹é¢æœ‰è¾ƒå¤§é™åˆ¶ã€‚

## â–¶ï¸ å¦‚ä½•ä½¿ç”¨

ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼æ¥è¿è¡Œæ­¤æœåŠ¡å™¨ï¼š

#### 1. ç‹¬ç«‹æ¨¡å¼

æ‚¨å¯ä»¥ç›´æ¥ä»ç»ˆç«¯è¿è¡ŒæœåŠ¡å™¨ã€‚è¿™ç§æ–¹å¼å¯¹äºæµ‹è¯•æˆ–è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„å®¢æˆ·ç«¯éå¸¸æœ‰ç”¨ã€‚

1.  **è®¾ç½®æ‚¨çš„ API ä»¤ç‰Œ**ï¼šä½¿ç”¨ä¸Šæ–‡æè¿°çš„ç¯å¢ƒå˜é‡æ–¹æ³•ã€‚
2.  **å¯åŠ¨æœåŠ¡å™¨**ï¼š
    ```bash
    python server.py
    ```
3.  **éªŒè¯**: æˆåŠŸå¯åŠ¨åï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹æ¶ˆæ¯ä¹‹ä¸€ï¼š
    -   `âœ… Tushare Token has been set.` (å¦‚æœæ‚¨é…ç½®äº†ä»¤ç‰Œ)
    -   `âš ï¸ Tushare Token is not set, using free interface (limited functionality).` (å¦‚æœæœªæ‰¾åˆ°ä»¤ç‰Œ)
    
    ç°åœ¨ï¼ŒæœåŠ¡å™¨å·²åœ¨è¿è¡Œå¹¶ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚

#### 2. ä¸ MCP å®¢æˆ·ç«¯ä¸€èµ·ä½¿ç”¨ (ä¾‹å¦‚ Claude Desktop)

å¤§å¤šæ•° MCP å®¢æˆ·ç«¯ä¼šä¸ºæ‚¨ç®¡ç†æœåŠ¡å™¨è¿›ç¨‹ã€‚

1.  **é…ç½® `mcp_config.json`**ï¼šæŒ‰ç…§é…ç½®éƒ¨åˆ†çš„è¯´æ˜ï¼Œç¡®ä¿ `cwd` å’Œ `TUSHARE_TOKEN` éƒ½å·²æ­£ç¡®è®¾ç½®ã€‚
2.  **å°†æ‚¨çš„å®¢æˆ·ç«¯æŒ‡å‘** æ­¤ `mcp_config.json` æ–‡ä»¶ã€‚
3.  **å®¢æˆ·ç«¯å°†è‡ªåŠ¨å¯åŠ¨**ï¼šå½“æ‚¨ä¸å…¶ä¸­ä¸€ä¸ªå·¥å…·äº¤äº’æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å¯åŠ¨ `server.py` è¿›ç¨‹ã€‚æ‚¨æ— éœ€æ‰‹åŠ¨è¿è¡Œ `python server.py`ã€‚

## ğŸ› ï¸ å¯ç”¨å·¥å…·

è¯¥æœåŠ¡å™¨æä¾›äº†ä¸€å¥—å…¨é¢çš„å·¥å…·é›†ï¼Œç”¨äºè®¿é—®é‡‘èæ•°æ®ã€‚ä»¥ä¸‹æ˜¯éƒ¨åˆ†å·¥å…·ç±»åˆ«ï¼š

-   **åŸºç¡€è‚¡ç¥¨æ•°æ®**: `get_stock_basic`, `get_daily_data`, `get_weekly_data`, `get_monthly_data` ç­‰ã€‚
-   **å¸‚åœºå‚è€ƒæ•°æ®**: `get_top_list`, `get_money_flow`, `get_margin_detail`, `get_block_trade`ã€‚
-   **è´¢åŠ¡æ•°æ®**: `get_financial_data`, `get_balance_sheet`, `get_cash_flow`, `get_fina_indicator`ã€‚
-   **æŒ‡æ•°æ•°æ®**: `get_index_data`, `get_index_basic`, `get_index_weight`ã€‚
-   **ETFä¸åŸºé‡‘æ•°æ®**: `get_etf_basic`, `get_etf_daily`, `get_fund_daily`, `get_fund_portfolio`ã€‚
-   **å€ºåˆ¸æ•°æ®**: `get_bond_basic`, `get_bond_daily`, `get_cb_basic`, `get_cb_daily`ã€‚
-   **å®è§‚ç»æµæ•°æ®**: `get_gdp_data`, `get_cpi_data`, `get_interest_rate`, `get_exchange_rate`ã€‚

å…³äºå®Œæ•´çš„å·¥å…·åˆ—è¡¨åŠå…¶å‚æ•°ï¼Œè¯·å‚è€ƒ `server.py` æ–‡ä»¶ä¸­çš„ `handle_list_tools` å‡½æ•°ã€‚

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [GPL v3.0 è®¸å¯è¯](./LICENSE) å¼€æºã€‚
